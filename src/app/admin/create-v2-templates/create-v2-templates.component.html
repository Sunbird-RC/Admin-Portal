<header>
  <nav class="navbar navbar-expand-lg navbar-light bg-header nav-b navbar-inverse" [routerLink]="['/v2-schema']"
    role="button">
    <a class="nav-link pl-3 text-color"><i class="fa fa-angle-left primary-text"></i> </a>
    <span class="fs-16">{{'ADD_TEMPLATES' | translate}}</span>
  </nav>
</header>

<div class="m-3" *ngIf="!showAddTemplate">
  <div class="d-flex align-items-center flex-column" *ngIf="!templates.length && !isLoading">
    <div>
      {{'NO_TEMPLATES_ADDED_YET' | translate}}
    </div>
    <button class="btn btn-primary mt-3" (click)="addNewTemplate()">{{'ADD_NEW_TEMPLATE' | translate}}</button>
  </div>
  <div class="row" *ngIf="templates.length">
    <div class="col-3 mb-6">
      <div class="card p-2 mb-2" *ngFor="let template of templates" role="button" (click)="showTemplate(template)"
        [class.active]="selectedTemplate.templateId === template.templateId">
        <h6>{{template?.templateId}}</h6>
      </div>
      <div class="card p-2">
        <button class="btn btn-primary" (click)="addNewTemplate()">{{'ADD_NEW_TEMPLATE' | translate}}</button>
      </div>
    </div>
    <div class="col-8 mb-6">
      <ng-container *ngIf="selectedTemplate">
        <div class="d-flex">
          <p class="pt-2 pb-2 mr-auto">{{selectedTemplate.templateId}}</p>
          <button class="btn btn-warning mr-2" (click)="editTemplate(selectedTemplate)">{{'EDIT' | translate}}</button>
          <button class="btn btn-danger" (click)="deleteTemplate(selectedTemplate)">{{'DELETE' | translate}}</button>
        </div>
        <div id="template" class="mb-6 p-4 border rounded box-overflow" [innerHtml]="templateHtml"></div>
      </ng-container>
    </div>
  </div>

  <div class="d-flex justify-content-center" *ngIf="isLoading">
    <div class="spinner-border" style="width: 5rem; height: 5rem;" role="status">
      <span class="sr-only">{{'LOADING'|translate}}</span>
    </div>
  </div>
</div>

<div *ngIf="showAddTemplate">
  <div class="d-flex p-3">
    <button class="fs-14 fw-bold btn bg-color-secondary submit-button color-sec mr-auto"
      (click)="showAddTemplate = false">{{'GO_BACK_TO_LIST' | translate}}</button>
    <input type="text" [(ngModel)]="templateType" placeholder="{{'ENTER_A_TYPE' | translate}}"
      class="form-control float-end w-10 mr-2 right">
    <button class="btn btn-primary right" (click)="saveTemplate()" [disabled]="!templateType || !defaultV2Template">{{'SAVE_TEMPLATE' | translate}}</button>
  </div>
</div>
<div [hidden]="!showAddTemplate">
  <div id="gjs"></div>
  <div id="blocks"></div>
</div>